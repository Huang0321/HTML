<!DOCTYPE html>
<html>
  <head>
    <title>JavaScript &amp; jQuery - Chapter 11: Content Panels - Photo Viewer</title>
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/photo-viewer.css" />
    <style type="text/css">
    	#photo-viewer{
    		background-image: url("img/photo-1.jpg");
    	}
    </style>
  </head>

  <body>

    <header><h1>Monsieur Pigeon</h1></header>

    <section class="page panel">
      <h2>The Flower Series</h2>
      <div class="gallery">
        <div id="photo-viewer"></div>
        <div id="thumbnails">
          <a href="img/photo-1.jpg" class="thumb active" title="Elderberry Marshmallow"><img src="img/thumb-1.jpg" alt="Elderberry Marshmallow" /></a>
          <a href="img/photo-2.jpg" class="thumb" title="Rose Marshmallow"><img src="img/thumb-2.jpg" alt="Rose Marshmallow" /></a>
          <a href="img/photo-3.jpg" class="thumb" title="Crysanthemum Marshmallow"><img src="img/thumb-3.jpg" alt="Crysanthemum Marshmallow" /></a>
        </div>
      </div>
      <div class="description">
        <p class="standfirst">Take your tastebuds for a gentle stroll through an English garden filled with Monsieur Pigeon's beautifully fragrant Flower Series marshmallows.</p>
        <p>With three sweetly floral options: <strong>Elderberry</strong>, <strong>Rose Petal</strong>, and <strong>Chrysanthemum</strong> - all edible and all naturally flavored - they will have you dreaming of butterflies and birdsong in no time.</p>
        <p><strong>$5.75</strong> / 3.5 oz packet</p>
        <a href="" id="buy">Buy now</a>
      </div>
    </section>
    <script src="js/myLip.js"></script>
    <script type="text/javascript">
    	(function(){
    		var thumbImages = document.querySelectorAll("#thumbnails img");
    		for (var i = 0; i < thumbImages.length; i += 1 ){      //for循环执行了，但是下面的函数没有执行
    			thumbImages[i].imgIndex = i + 1;                  //所以i的值最后变成了3
    			handleEvent(thumbImages[i], "mouseover", function(evt){
    				evt = evt || window.event;
    				var target = evt.target ||evt.srcElement;    // 自己给标签强加的属性，要拿需要用getAttribute(attributeName);
    				$("photo-viewer").style.backgroundImage = "url(img/photo-" + target.imgIndex + ".jpg)";
    					removeOpacity();
    				target.style.opacity = 0.3;		
    			})
    		}
    		function removeOpacity(){
    			for (var i = 0; i < thumbImages.length; i += 1){
    				thumbImages[i].style.opacity = 1;
    			}
    		}
    	}())
    </script>
    // 这样就可以用jquery
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
  </body>
</html>